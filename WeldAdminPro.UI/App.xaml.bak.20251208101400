<Application x:Class="WeldAdminPro.UI.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:WeldAdminPro.UI.ViewModels"
             StartupUri="MainWindow.xaml">

  <Application.Resources>
    <!--
      Global navigation resources
      - NavItemTemplate: shows Glyph (Segoe MDL2 Assets) + Title/Label
      - NavListBoxItem: global ListBoxItem container style used by nav lists
      - NavListBoxTemplate: minimal ListBox template that does not inject overlay rectangles
    -->

    <DataTemplate x:Key="NavItemTemplate" DataType="{x:Type vm:NavItem}">
      <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="4">
        <TextBlock Text="{Binding Glyph}"
                   FontFamily="Segoe MDL2 Assets"
                   FontSize="16"
                   Margin="4,0,10,0"
                   VerticalAlignment="Center"
                   Foreground="White"/>

        <Grid>
          <TextBlock x:Name="TitleText"
                     Text="{Binding Title}"
                     VerticalAlignment="Center"
                     FontSize="13"
                     Foreground="White" />

          <TextBlock x:Name="LabelText"
                     Text="{Binding Label}"
                     VerticalAlignment="Center"
                     FontSize="13"
                     Foreground="White"
                     Visibility="Collapsed" />
        </Grid>

        <DataTemplate.Triggers>
          <DataTrigger Binding="{Binding Title}" Value="">
            <Setter TargetName="TitleText" Property="Visibility" Value="Collapsed"/>
            <Setter TargetName="LabelText" Property="Visibility" Value="Visible"/>
          </DataTrigger>
        </DataTemplate.Triggers>
      </StackPanel>
    </DataTemplate>

    <!-- Global ListBoxItem style for navigation lists -->
    <Style TargetType="ListBoxItem" x:Key="NavListBoxItem">
      <Setter Property="Padding" Value="0"/>
      <Setter Property="Margin" Value="4 4"/>
      <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
      <Setter Property="Foreground" Value="White"/>
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="ListBoxItem">
            <Border x:Name="Bd" CornerRadius="6" Background="Transparent">
              <ContentPresenter Content="{TemplateBinding Content}"
                                ContentTemplate="{TemplateBinding ContentTemplate}"
                                Margin="6"
                                HorizontalAlignment="Stretch"
                                VerticalAlignment="Center"/>
            </Border>
            <ControlTemplate.Triggers>
              <Trigger Property="IsMouseOver" Value="True">
                <Setter TargetName="Bd" Property="Background" Value="#FF34495E"/>
              </Trigger>
              <Trigger Property="IsSelected" Value="True">
                <Setter TargetName="Bd" Property="Background" Value="#FF1ABC9C"/>
                <Setter Property="Foreground" Value="White"/>
              </Trigger>
            </ControlTemplate.Triggers>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>

    <!-- Minimal ListBox template used for nav lists so default chrome doesn't inject rectangles -->
    <ControlTemplate x:Key="NavListBoxTemplate" TargetType="ListBox">
      <Border Background="{TemplateBinding Background}"
              BorderBrush="{TemplateBinding BorderBrush}"
              BorderThickness="{TemplateBinding BorderThickness}"
              SnapsToDevicePixels="True">
        <ScrollViewer Focusable="false" Padding="0" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">
          <ItemsPresenter/>
        </ScrollViewer>
      </Border>
    </ControlTemplate>

    <!-- OPTIONAL: a Style to apply the NavListBoxTemplate automatically to ListBoxes with a specific key -->
    <Style x:Key="NavListBox" TargetType="ListBox">
      <Setter Property="Template" Value="{StaticResource NavListBoxTemplate}" />
      <Setter Property="ItemContainerStyle" Value="{StaticResource NavListBoxItem}" />
      <Setter Property="ItemTemplate" Value="{StaticResource NavItemTemplate}" />
      <Setter Property="Background" Value="Transparent" />
      <Setter Property="BorderThickness" Value="0" />
      <Setter Property="Foreground" Value="White" />
    </Style>

  </Application.Resources>
</Application>

