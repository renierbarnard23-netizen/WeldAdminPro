<UserControl x:Class="WeldAdminPro.UI.Views.StockView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:views="clr-namespace:WeldAdminPro.UI.Views"
             mc:Ignorable="d">

	<TabControl Margin="10">

		<!-- ===================== -->
		<!-- TAB 1: STOCK ITEMS -->
		<!-- ===================== -->
		<TabItem Header="Stock Items">

			<DockPanel>

				<!-- TOP BUTTON BAR -->
				<StackPanel Orientation="Horizontal"
                            DockPanel.Dock="Top"
                            Margin="0,0,0,10">

					<Button Content="New Stock Item"
                            Width="150"
                            Margin="0,0,10,0"
                            Command="{Binding NewItemCommand}" />

					<Button Content="Edit Stock Item"
                            Width="150"
                            Margin="0,0,10,0"
                            Command="{Binding EditItemCommand}" />

					<Button Content="Stock IN"
                            Width="120"
                            Margin="0,0,10,0"
                            Command="{Binding StockInCommand}" />

					<Button Content="Stock OUT"
                            Width="120"
                            Margin="0,0,10,0"
                            Command="{Binding StockOutCommand}" />

					<!-- SINGLE, VALID DELETE BUTTON -->
					<Button Content="Delete"
                            Width="100"
                            Margin="0,0,10,0"
                            Command="{Binding DeleteStockItemCommand}"
                            Background="LightGray"
                            ToolTip="Cannot delete items with transaction history" />

					<Button Content="Undo Edit"
                            Width="80"
                            Margin="0,0,10,0"
                            Command="{Binding UndoEditCommand}"
                            Background="LightGray" />

					<Button Content="Manage Categories"
                            Width="140"
                            Height="40"
                            Click="ManageCategories_Click" />

				</StackPanel>

				<!-- MAIN CONTENT -->
				<Grid>
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="200"/>
						<ColumnDefinition Width="*"/>
					</Grid.ColumnDefinitions>

					<!-- LEFT FILTER PANEL -->
					<Border Grid.Column="0"
                            Margin="0,0,10,0"
                            Padding="10"
                            BorderBrush="#CCCCCC"
                            BorderThickness="1">

						<StackPanel>
							<TextBlock Text="Category"
                                       FontWeight="SemiBold"
                                       Margin="0,0,0,5"/>

							<ComboBox ItemsSource="{Binding Categories}"
                                      SelectedItem="{Binding SelectedCategory}"
                                      Width="160"/>
						</StackPanel>
					</Border>

					<!-- STOCK ITEMS GRID -->
					<DataGrid Grid.Column="1"
                              ItemsSource="{Binding Items}"
                              SelectedItem="{Binding SelectedItem}"
                              AutoGenerateColumns="False"
                              IsReadOnly="True">

						<DataGrid.Columns>

							<DataGridTextColumn Header="Item Code"
                                                Binding="{Binding ItemCode}" />

							<DataGridTextColumn Header="Description"
                                                Binding="{Binding Description}" />

							<DataGridTextColumn Header="Quantity"
                                                Binding="{Binding Quantity}" />

							<DataGridTextColumn Header="Unit"
                                                Binding="{Binding Unit}" />

							<DataGridTextColumn Header="Category"
                                                Binding="{Binding Category}"
                                                Width="*" />

						</DataGrid.Columns>

						<DataGrid.RowStyle>
							<Style TargetType="DataGridRow">
								<Style.Triggers>

									<!-- OUT OF STOCK -->
									<DataTrigger Binding="{Binding IsOutOfStock}" Value="True">
										<Setter Property="Background" Value="#FFDD6B6B"/>
										<Setter Property="Foreground" Value="Black"/>
									</DataTrigger>

									<!-- LOW STOCK -->
									<DataTrigger Binding="{Binding IsLowStock}" Value="True">
										<Setter Property="Background" Value="#FFFFE08A"/>
										<Setter Property="Foreground" Value="Black"/>
									</DataTrigger>

								</Style.Triggers>
							</Style>
						</DataGrid.RowStyle>

					</DataGrid>
				</Grid>

			</DockPanel>
		</TabItem>

		<!-- ===================== -->
		<!-- TAB 2: TRANSACTIONS -->
		<!-- ===================== -->
		<TabItem Header="Transaction History">
			<views:StockTransactionHistoryView />
		</TabItem>

	</TabControl>
</UserControl>
